### CAU IGEUL 확장 프로그램 프로젝트 요약

이 문서는 프로젝트의 각 파일과 폴더의 기능 및 목적을 설명합니다.

---

### Ⅰ. 핵심 설정 파일

*   **`manifest.json`**: Chrome 확장 프로그램의 심장과 같은 파일입니다.
    *   이름, 버전, 설명 등 기본 정보 정의
    *   `permissions`: `identity`(인증), `scripting`(스크립트 주입) 등 확장 프로그램이 사용하는 권한 목록
    *   `action`: 툴바 아이콘 클릭 시 `popup.html`을 띄우도록 지정
    *   `oauth2`: Google 인증에 필요한 클라이언트 ID와 범위(scope)를 설정
    *   `content_security_policy`: 보안을 위해 허용된 외부 스크립트 및 연결 소스를 엄격하게 제한
    *   `background`, `content_scripts` 등 주요 스크립트 파일 등록

*   **`package.json`**: Node.js 기반 프로젝트의 설정 파일입니다.
    *   `dependencies`: `firebase`와 같은 실제 기능에 필요한 라이브러리 목록
    *   `devDependencies`: `webpack` 등 개발에만 필요한 도구 라이브러리 목록
    *   `scripts`: `npm run build`, `npm run dev` 같은 빌드 명령어 정의

*   **`webpack.config.js`**: 모듈 번들러 Webpack의 설정 파일입니다.
    *   `entry`: `background.js`, `content.js`, `popup.js` 등 번들링할 시작점 파일들을 지정
    *   `output`: 번들링된 결과물을 `dist` 폴더에 저장하도록 설정
    *   `plugins`: `manifest.json`, 폰트, `popup.html` 등 JS 외의 파일들을 `dist` 폴더로 복사하는 역할

---

### Ⅱ. 팝업 UI (사용자 인터페이스)

*   **`popup.html`**: 확장 프로그램 아이콘 클릭 시 나타나는 팝업 창의 HTML 구조를 정의합니다.
    *   로그인/로그아웃 버튼, 본문 추출 버튼 포함
    *   사용자 정보(프로필 사진, 이름, 이메일)를 표시하는 영역 포함

*   **`popup.css`**: `popup.html`의 스타일을 지정하는 CSS 파일입니다.

*   **`popup.js`**: 팝업 창의 동적 기능을 담당하는 스크립트입니다.
    *   로그인/로그아웃 버튼 클릭 시 `background.js`에 메시지를 보내 인증을 요청
    *   `background.js`로부터 현재 로그인 상태를 받아 UI를 동적으로 변경 (예: 로그인 -> 로그아웃 버튼으로 전환)

---

### Ⅲ. 소스 코드 (`src` 폴더)

#### 1. 주요 스크립트

*   **`src/background.js`**: 확장 프로그램의 백그라운드에서 실행되는 핵심 로직 파일입니다.
    *   Firebase 인증 초기화 및 관리
    *   `onAuthStateChanged`: 사용자의 로그인/로그아웃 상태를 실시간으로 감지
    *   `popup.js`로부터 오는 로그인/로그아웃 요청을 받아 `chrome.identity` API와 Firebase 인증을 처리
    *   인증 상태가 변경되면 `popup.js`로 메시지를 보내 UI를 업데이트하도록 지시

*   **`src/content.js`**: 실제 웹페이지에 삽입되어 페이지 콘텐츠와 직접 상호작용하는 스크립트입니다.
    *   `popup.js`로부터 '본문 추출' 메시지를 수신
    *   `extractors.js`를 사용해 현재 페이지의 제목, 본문 등을 추출
    *   `readerMode.js`를 사용해 추출된 내용으로 읽기 모드 화면을 렌더링

*   **`src/firebaseConfig.js`**: Firebase 프로젝트 연동을 위한 설정 파일입니다.
    *   Firebase 프로젝트의 API 키, 인증 도메인 등 초기화에 필요한 정보를 담고 있음

#### 2. 기능별 모듈 (`src/modules`)

*   **`src/modules/extractors.js`**: 웹페이지에서 주요 콘텐츠(제목, 본문 등)를 추출하는 알고리즘을 포함합니다.

*   **`src/modules/readerMode.js`**: 추출된 콘텐츠를 바탕으로 '읽기 모드' 화면 전체를 생성하고 렌더링하는 핵심 모듈입니다.
    *   기존 페이지 내용을 지우고, 새로운 읽기 모드용 HTML/CSS를 주입
    *   읽기 모드 상단에 표시될 툴바를 생성하고, 불필요한 버튼(본문 추출 등)을 숨김

*   **`src/modules/changeTextStyle.js`**: 읽기 모드에서 폰트, 글자 크기, 줄 간격 등 텍스트 스타일을 변경하는 기능을 담당합니다.

*   **`src/modules/readingGuide.js`**: 읽기 가이드(하이라이트 라인) 기능을 담당합니다.

#### 3. 툴바 스타일 (`src/styles`)

*   **`src/styles/toolbarHTML.js`**: 읽기 모드 상단에 표시되는 툴바의 HTML 구조를 문자열 형태로 제공합니다.

*   **`src/styles/toolbarCSS.js`**: 툴바의 CSS 스타일을 동적으로 주입하는 코드를 포함합니다.

---

### Ⅳ. 기타

*   **`.gitignore`**: Git이 추적하지 않을 파일/폴더(예: `node_modules`, `dist`) 목록입니다.
*   **`dist/`**: Webpack 빌드 후 생성되는 최종 결과물 폴더입니다. 실제 확장 프로그램은 이 폴더의 파일들을 사용합니다.
*   **`fonts/`**: 확장 프로그램에서 사용하는 폰트 파일이 저장된 폴더입니다.
*   **`node_modules/`**: `npm`으로 설치한 모든 라이브러리가 저장되는 폴더입니다.